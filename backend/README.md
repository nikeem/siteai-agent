# SiteAI Agent Backend

Python –±—ç–∫–µ–Ω–¥ –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞, –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π —Å–∞–π—Ç–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (OpenAI/Anthropic)
- üí¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏ –∏ —Å–µ—Å—Å–∏—è–º–∏
- üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–∫–æ–Ω—Ç–∞–∫—Ç—ã, –∑–≤–æ–Ω–æ–∫, Telegram)
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Å—Ç–∏–ª–∏ –æ–±—â–µ–Ω–∏—è
- üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (macOS/Linux)
source venv/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
# –£–∫–∞–∂–∏—Ç–µ API –∫–ª—é—á–∏ –¥–ª—è OpenAI –∏–ª–∏ Anthropic
```

## –ó–∞–ø—É—Å–∫

```bash
# –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uvicorn app.main:app --reload --port 8000

# –ò–ª–∏ —á–µ—Ä–µ–∑ Python
python -m app.main
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### Chat
- `POST /api/v1/chat` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `GET /api/v1/sessions/{session_id}` - –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é

### Settings
- `GET /api/v1/settings` - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç–∞
- `PUT /api/v1/settings` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `DELETE /api/v1/settings` - –£–¥–∞–ª–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Conversion
- `POST /api/v1/conversion/contact` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã
- `POST /api/v1/conversion/callback` - –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∑–≤–æ–Ω–æ–∫
- `GET /api/v1/conversion/list` - –°–ø–∏—Å–æ–∫ –∫–æ–Ω–≤–µ—Ä—Å–∏–π

### Health
- `GET /api/v1/health` - Health check

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ agents/          # AI –¥–≤–∏–∂–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_engine.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dialog_manager.py
‚îÇ   ‚îú‚îÄ‚îÄ api/             # API endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ models/          # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ .env.example
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=app --cov-report=html
```

## –õ–∏–Ω—Ç–∏–Ω–≥

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
black app/
flake8 app/
mypy app/
```
